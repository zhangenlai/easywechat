+function(c){c.fn.buildFlappyBird=function(g){new e(g)};var e=function(g){this.start()};e.settings={state:false,ifStart:false,isStop:false,isEnd:false,topHeight:50,bottomHeight:460,moveEvent:c.noop};e.DEFAULT={state:false,ifStart:false,isStop:false,isEnd:false};e.prototype.start=function(){var g=this;c(document).keydown(function(h){var i=h.keyCode;switch(i){case 38:g.keyUp();break;case 32:if(!g.getSettings().ifStart){return}if(!g.getSettings().isStop){g.stopGame()}else{g.restartGame()}break;case 13:if(g.getSettings().isEnd){g.resetGame()}break}})};e.prototype.keyUp=function(){if(!this.getSettings().ifStart){this.getSettings().ifStart=true;this.setState(true);this.movePipe();this.getWelcome().fadeOut()}if(!this.getState()){return}clearInterval(b);d()};e.prototype.getBird=function(){return c("#flappy_bird")};e.prototype.getSettings=function(){return e.settings};e.prototype.getPipe=function(){return c(".flappy_pipe_box")};e.prototype.getState=function(){return this.getSettings().state};e.prototype.getIndex=function(){return Number(c("#index_area").html())};e.prototype.setIndex=function(g){return c("#index_area").html(g)};e.prototype.setState=function(g){this.getSettings().state=g};e.prototype.getWelcome=function(){return c(".welcome_info")};e.prototype.getResult=function(){return c(".result_info")};e.prototype.setResult=function(g){this.getResult().find(".score").html(g)};e.prototype.addPipe=function(i){var g=parseInt(Math.random()*320)+40,j=this.getPipe();var h='<div class="flappy_pipe" data-left="'+(250-i)+'" data-height="'+g+'" style="height:'+g+"px;left:"+(0-i+400)+'px;"></div>';j.append(h)};e.prototype.checkCollision=function(j){var i=c('.flappy_pipe[data-left="'+(j)+'"]'),h=Number(i.attr("data-height")),k=this.getBird(),g=k.offset().top;if(g<h||g>h+80){this.endGame()}};e.prototype.movePipe=function(){var h=this,g=99999;this.getSettings().moveEvent=setInterval(function(){var l=h.getPipe(),j=h.getState(),k=Number(l.css("left").replace("px",""))-1,i=c('.flappy_pipe[data-left="'+(0-k)+'"]');if(j){l.css({left:k+"px"});if(k<-200&&k%200==0){h.addPipe(k)}if((k+120)<-400&&(k+120)%200==0){h.setIndex(h.getIndex()+1)}if(i.length>0){g=0-k}if(0-k>g&&0-k<g+87){h.checkCollision(g)}}},5)};e.prototype.stopGame=function(){this.setState(false);this.getSettings().isStop=true;clearInterval(b)};e.prototype.restartGame=function(){this.setState(true);this.getSettings().isStop=false;d(a)};e.prototype.endGame=function(){this.setState(false);this.setResult(this.getIndex());this.getResult().fadeIn();this.getSettings().isEnd=true;clearInterval(this.getSettings().moveEvent)};e.prototype.resetGame=function(){e.settings=c.extend({},e.settings,e.DEFAULT);var g=this.getPipe(),i=this.getBird(),j=this.getWelcome(),h=this.getResult();g.html("").css("left","0px");i.css("top","230px");j.fadeIn();h.fadeOut();clearInterval(b);this.setIndex(0);this.start()};var a=-10,b=c.noop;function d(g){a=g||-2.2;b=setInterval(function(){f()},5)}function f(){var h=c("#flappy_bird");var i=h.offset().top,g=i+a;h.css({"top":g+"px"});if(i<460){a+=0.05}else{a=0;h.css({"top":"460px"});e.prototype.endGame()}}}(jQuery);$(function(){$(window).buildFlappyBird()});